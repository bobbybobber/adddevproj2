{% extends "base.html" %}
{% block title %}Library Loan System - Retrieve Users{% endblock %}
{% block content %}
<h1 class="display-4">Retrieve Blog</h1>
<div>
    {% if count == 0 %}
    <p>There are no Blog.</p>
    {% elif count == 1 %}
    <p>There is 1 Blog.</p>
    {% else %}
    <p>There are {{ count }} blog.</p>
    {% endif %}
</div>
<div class="container">
    <div id="blogCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner" id="dynamicCarousel">
            {% for batch in blog_list|batch(3) %}
                <div class="carousel-item {% if loop.first %}active{% endif %}">
                    <div class="card-group">
                        {% for blog in batch %}
                            <div class="card" style="width: 18rem; margin-right: 20px;">
                                <img class="card-img-top" src="{{ blog.get_blog_image() }}" alt="Card image cap" height="170px" width="291.44px">
                                <div class="card-body">
                                    <h5 class="card-title">{{ blog.get_name() }}</h5>
                                    <p class="card-text">{{ blog.get_comment() }}</p>
                                    <a href="#" class="btn btn-primary">View More</a>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}

            {# Handle the case when the number of blog posts is not a multiple of 3 #}
            {% if blog_list|length % 3 != 0 %}
                <div class="carousel-item">
                    <div class="card-group">
                        {% for blog in blog_list[-(blog_list|length % 3):] %}
                            <div class="card" style="width: 18rem; margin-right: 20px;">
                                <img class="card-img-top" src="{{ blog.get_blog_image() }}" alt="Card image cap" height="170px" width="291.44px">
                                <div class="card-body">
                                    <h5 class="card-title">{{ blog.get_name() }}</h5>
                                    <p class="card-text">{{ blog.get_comment() }}</p>
                                    <a href="#" class="btn btn-primary">View More</a>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        </div>
        <button class="carousel-control-prev buttonC" type="button" data-bs-target="#blogCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon buttonC" aria-hidden="true" style="background-color:#D3D3D3;"></span>
            <span class="visually-hidden buttonC">Previous</span>
        </button>
        <button class="carousel-control-next buttonC" type="button" data-bs-target="#blogCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon buttonC" aria-hidden="true" style="background-color:#D3D3D3;"></span>
            <span class="visually-hidden buttonC">Next</span>
        </button>
    </div>
</div>
{% endblock %}
